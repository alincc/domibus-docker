<VirtualHost *:80>
    ServerName VHOST_C3_HOSTNAME

    ErrorLog logs/vhost_corner3.error.log
    CustomLog logs/vhost_corner3.log combined

    ProxyRequests Off
    ProxyPreserveHost On
    ProxyPass /server-status !
    ProxyPass /balancer-manager !
    ProxyPass /server-info !
    ProxyPass / balancer://wl_c3/
    ProxyPassReverse / balancer://wl_c3/

    RequestHeader unset Proxy-ip
    RequestHeader unset Proxy-keysize
    RequestHeader unset X-Forwarded-Proto
    Header unset filter-class
    Header add Set-Cookie "xtx=.%{BALANCER_WORKER_ROUTE}e; Domain=VHOST_C3_DOMAIN; path=/; HttpOnly" env=BALANCER_ROUTE_CHANGED
</VirtualHost>
<Proxy balancer://wl_c3>
    BalancerMember http://C3_WL_NODE1_HOSTNAME:C3_WL_NODE1_PORT route=xto min=1 max=50 connectiontimeout=1000ms keepalive=on retry=0 timeout=60 ttl=30
    BalancerMember http://C3_WL_NODE2_HOSTNAME:C3_WL_NODE2_PORT route=xti min=1 max=50 connectiontimeout=1000ms keepalive=on retry=0 timeout=60 ttl=30
    ProxySet lbmethod=bybusyness
    ProxySet timeout=60
    ProxySet nofailover=off
    ProxySet stickysession=xtx
</Proxy>
